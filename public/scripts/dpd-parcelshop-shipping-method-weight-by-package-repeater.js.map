{"version":3,"file":"/scripts/dpd-parcelshop-shipping-method-weight-by-package-repeater.js","mappings":"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","sources":["webpack:///./assets/scripts/dpd-export-repeater-settings-field.js","webpack:///./assets/scripts/dpd-parcelshop-shipping-method.js","webpack:///./assets/scripts/dpd-parcelshop-shipping-method-weight-by-package-repeater.js"],"sourcesContent":["export class DpdExportRepeaterSettingsField {\r\n\tconstructor(el) {\r\n\t\tthis.el = el;\r\n\t\tthis.props = this.getProps(el);\r\n\t\tthis.refs = this.getRefs(el);\r\n\t\tthis.inputsData = this.getInputsData(el);\r\n\t}\r\n\r\n\tinit() {\r\n\t\tif (this.inputsData.length) {\r\n\t\t\tthis.inputsData.forEach((inputData) => {\r\n\t\t\t\tthis.addRow(inputData);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.addRow();\r\n\t\t}\r\n\r\n\t\tthis.refs.addButton.onclick = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.addRow();\r\n\t\t};\r\n\t}\r\n\r\n\tgetRefs(el) {\r\n\t\tlet result = {};\r\n\t\t[...el.querySelectorAll('[data-ref]')].forEach((ref) => {\r\n\t\t\tresult[ref.dataset.ref] = ref;\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetProps(el) {\r\n\t\treturn JSON.parse(el.dataset.props);\r\n\t}\r\n\r\n\tgetInputsData(el) {\r\n\t\treturn JSON.parse(el.dataset.inputsData);\r\n\t}\r\n\r\n\tcreateFromHTML(html = '') {\r\n\t\tlet element = document.createElement(null);\r\n\t\telement.innerHTML = html;\r\n\t\treturn element.firstElementChild;\r\n\t}\r\n\r\n\taddRow(inputData = []) {\r\n\t\tconst that = this;\r\n\r\n\t\tlet newRow = this.createFromHTML(this.renderRow(inputData));\r\n\t\tconst rowRefs = this.getRefs(newRow);\r\n\r\n\t\trowRefs.removeButton.onclick = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tthat.removeRow(newRow);\r\n\t\t};\r\n\r\n\t\tthis.refs.rowList.appendChild(newRow);\r\n\t}\r\n\r\n\tremoveRow(row) {\r\n\t\tif (this.refs.rowList.children.length <= 1) return;\r\n\r\n\t\trow.remove();\r\n\t\tthis.el.focus();\r\n\r\n\t\tif (this.refs.rowList.children.length < this.props.maxRows) {\r\n\t\t\tthis.refs.addButton.style.display = '';\r\n\t\t}\r\n\t}\r\n}\r\n","const dpdParcelshopShippingMethod = (function () {\n\tconst SHIPPING_TYPE_FIXED = 'fixed';\n\tconst SHIPPING_TYPE_PRODUCTS_WEIGHT_BASED = 'products_weight_based';\n\n\tlet shippingTypeSelect,\n\t\tfixedShippingTypes,\n\t\tproductsWeightBasedShippingTypes,\n\t\tproductsWeightLimitCheckbox,\n\t\tproductsWeightLimitShippingFields,\n\t\tproductsDimensionLimitCheckbox,\n\t\tproductsDimensionLimitShippingFields;\n\n\tfunction init() {\n\t\t// Shipping type fields\n\t\tshippingTypeSelect = document.querySelector('.js-dpd-shipping-type-select');\n\n\t\tif (shippingTypeSelect) {\n\t\t\tfixedShippingTypes = document.querySelectorAll(\n\t\t\t\t'.js-dpd-fixed-shipping-type'\n\t\t\t);\n\t\t\tproductsWeightBasedShippingTypes = document.querySelectorAll(\n\t\t\t\t'.js-dpd-weight-based-shipping-type'\n\t\t\t);\n\n\t\t\tshippingTypeSelect.addEventListener('change', updateShippingTypeFields);\n\t\t\tupdateShippingTypeFields();\n\t\t}\n\n\t\t// Products weight limit fields\n\t\tproductsWeightLimitCheckbox = document.querySelector(\n\t\t\t'.js-dpd-checkbox-weight-limit'\n\t\t);\n\n\t\tif (productsWeightLimitCheckbox) {\n\t\t\tproductsWeightLimitShippingFields = document.querySelectorAll(\n\t\t\t\t'.js-dpd-weight-limit-shipping-type'\n\t\t\t);\n\n\t\t\tproductsWeightLimitCheckbox.addEventListener(\n\t\t\t\t'change',\n\t\t\t\tupdateProductWeightLimitFields\n\t\t\t);\n\t\t\tupdateProductWeightLimitFields();\n\t\t}\n\n\t\t// Products dimension limit fields\n\t\tproductsDimensionLimitCheckbox = document.querySelector(\n\t\t\t'.js-dpd-checkbox-dimension-limit'\n\t\t);\n\n\t\tif (productsDimensionLimitCheckbox) {\n\t\t\tproductsDimensionLimitShippingFields = document.querySelectorAll(\n\t\t\t\t'.js-dpd-dimension-limit-shipping-type'\n\t\t\t);\n\n\t\t\tproductsDimensionLimitCheckbox.addEventListener(\n\t\t\t\t'change',\n\t\t\t\tupdateProductDimensionLimitFields\n\t\t\t);\n\t\t\tupdateProductDimensionLimitFields();\n\t\t}\n\t}\n\n\tfunction updateShippingTypeFields() {\n\t\tconst isFixed = shippingTypeSelect.value === SHIPPING_TYPE_FIXED;\n\t\ttoggleElements(fixedShippingTypes, isFixed);\n\t\ttoggleElements(productsWeightBasedShippingTypes, !isFixed);\n\t}\n\n\tfunction updateProductWeightLimitFields() {\n\t\ttoggleElements(\n\t\t\tproductsWeightLimitShippingFields,\n\t\t\tproductsWeightLimitCheckbox.checked\n\t\t);\n\t}\n\n\tfunction updateProductDimensionLimitFields() {\n\t\ttoggleElements(\n\t\t\tproductsDimensionLimitShippingFields,\n\t\t\tproductsDimensionLimitCheckbox.checked\n\t\t);\n\t}\n\n\tfunction toggleElements(elements, show) {\n\t\telements.forEach((el) => {\n\t\t\tconst parentFieldset = el.closest('fieldset');\n\t\t\tif (parentFieldset) {\n\t\t\t\tconst label = parentFieldset.previousElementSibling;\n\t\t\t\tif (label && label.tagName === 'LABEL') {\n\t\t\t\t\tlabel.style.display = show ? '' : 'none';\n\t\t\t\t}\n\t\t\t\tparentFieldset.style.display = show ? '' : 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tinit: init,\n\t};\n})();\n\nexport default dpdParcelshopShippingMethod;\n","import { DpdExportRepeaterSettingsField } from './dpd-export-repeater-settings-field';\r\nimport dpdParcelshopShippingMethod from './dpd-parcelshop-shipping-method';\r\n\r\nwindow.DpdParcelshopShippingMethodWeightByPackageRepeater = class extends (\r\n\tDpdExportRepeaterSettingsField\r\n) {\r\n\tconstructor(el) {\r\n\t\tsuper(el);\r\n\t}\r\n\r\n\trenderRow(inputData = []) {\r\n\t\treturn `\r\n\t\t\t<li class=\"repeatable-field__row\">\r\n\t\t\t\t\t<div class=\"repeatable-field__row-wrap\">\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<label for=\"${this.props.inputName}_min[]\">\r\n\t\t\t\t\t\t\t\t\t\t${'minWeightInputText' in this.props ? this.props.minWeightInputText : ''}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"repeatable-field__input form-field\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-ref=\"input-min\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"${this.props.inputName}_min[]\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${'min' in inputData ? inputData.min : ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"${\r\n\t\t\t\t\t\t\t\t\t\t\t\t'minWeightInputPlaceholderText' in this.props\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? this.props.minWeightInputPlaceholderText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<label for=\"${this.props.inputName}_max[]\">\r\n\t\t\t\t\t\t\t\t\t\t\t${'maxWeightInputText' in this.props ? this.props.maxWeightInputText : ''}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"repeatable-field__input form-field\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-ref=\"input-max\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"${this.props.inputName}_max[]\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${'max' in inputData ? inputData.max : ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"${\r\n\t\t\t\t\t\t\t\t\t\t\t\t'maxWeightInputPlaceholderText' in this.props\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? this.props.maxWeightInputPlaceholderText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<label for=\"${this.props.inputName}_price[]\">\r\n\t\t\t\t\t\t\t\t\t\t\t${'priceInputText' in this.props ? this.props.priceInputText : ''}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"repeatable-field__input form-field\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-ref=\"input-price\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"${this.props.inputName}_price[]\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${'price' in inputData ? inputData.price : ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"${\r\n\t\t\t\t\t\t\t\t\t\t\t\t'priceInputPlaceholderText' in this.props\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? this.props.priceInputPlaceholderText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"repeatable-field__remove-button button\"\r\n\t\t\t\t\t\t\t\t\tdata-ref=\"removeButton\"\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t${this.props.removeLabel ?? 'Remove'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t`;\r\n\t}\r\n};\r\n\r\njQuery(document.body).on('wc_backbone_modal_loaded', function (evt, target) {\r\n\tif ('wc-modal-shipping-method-settings' === target) {\r\n\t\tdocument\r\n\t\t\t.querySelectorAll('[data-component=\"field-repeater\"]')\r\n\t\t\t.forEach((el) => {\r\n\t\t\t\tconst fieldRepeater =\r\n\t\t\t\t\tnew window.DpdParcelshopShippingMethodWeightByPackageRepeater(el);\r\n\t\t\t\tfieldRepeater.init();\r\n\t\t\t});\r\n\r\n\t\t// init shipping method scripts\r\n\t\tdpdParcelshopShippingMethod.init();\r\n\t}\r\n});\r\n"],"names":["DpdExportRepeaterSettingsField","el","_classCallCheck","this","props","getProps","refs","getRefs","inputsData","getInputsData","key","value","_this","length","forEach","inputData","addRow","addButton","onclick","e","preventDefault","result","_toConsumableArray","querySelectorAll","ref","dataset","JSON","parse","html","arguments","undefined","element","document","createElement","innerHTML","firstElementChild","that","newRow","createFromHTML","renderRow","removeButton","removeRow","rowList","appendChild","row","children","remove","focus","maxRows","style","display","shippingTypeSelect","fixedShippingTypes","productsWeightBasedShippingTypes","productsWeightLimitCheckbox","productsWeightLimitShippingFields","productsDimensionLimitCheckbox","productsDimensionLimitShippingFields","SHIPPING_TYPE_FIXED","updateShippingTypeFields","isFixed","toggleElements","updateProductWeightLimitFields","checked","updateProductDimensionLimitFields","elements","show","parentFieldset","closest","label","previousElementSibling","tagName","init","querySelector","addEventListener","window","DpdParcelshopShippingMethodWeightByPackageRepeater","_DpdExportRepeaterSet","_class","_callSuper","_inherits","_this$props$removeLab","concat","inputName","minWeightInputText","min","minWeightInputPlaceholderText","maxWeightInputText","max","maxWeightInputPlaceholderText","priceInputText","price","priceInputPlaceholderText","removeLabel","jQuery","body","on","evt","target","dpdParcelshopShippingMethod"],"sourceRoot":""}