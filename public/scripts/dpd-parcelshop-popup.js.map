{"version":3,"file":"/scripts/dpd-parcelshop-popup.js","mappings":"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","sources":["webpack:///./assets/scripts/dpd-parcelshop-popup.js"],"sourcesContent":["window.dpdParcelShopPopup = (function () {\n\tvar popupSelector,\n\t\tpopup,\n\t\tpopupFormSelector,\n\t\tpopupForm,\n\t\tpopupCloseBtnSelector,\n\t\tpopupContainerSelector,\n\t\tpopupInputCitySelector,\n\t\tpopupInputZipSelector,\n\t\tpopupInputCountrySelector,\n\t\tpopupInputCity,\n\t\tpopupInputZip,\n\t\tpopupInputCountry,\n\t\tpopupParcelsListSelector,\n\t\tpopupParcelsList,\n\t\tpopupResponseSelector,\n\t\tpopupResponse,\n\t\tpopupSearchBtnSelector,\n\t\tpopupSearchBtn,\n\t\tpopupResultsSelector,\n\t\tpopupResults,\n\t\tpopupOpenBtnSelector,\n\t\tpopupChooseParcelshopBtnSelector,\n\t\tchosenParcelShopContentSelector,\n\t\tchosenParcelShopContentTextSelector,\n\t\tchosenParcelShopHiddenParcelIdSelector,\n\t\tchosenParcelShopHiddenParcelPusIdSelector,\n\t\tchosenParcelShopHiddenParcelNameSelector,\n\t\tchosenParcelShopHiddenParcelStreetSelector,\n\t\tchosenParcelShopHiddenParcelCitySelector,\n\t\tchosenParcelShopHiddenParcelZipSelector,\n\t\tchosenParcelShopHiddenParcelCountryCodeSelector;\n\n\tfunction init() {\n\t\tpopupSelector = '.js-dpd-parcelshop-popup';\n\t\tpopupFormSelector = '.js-dpd-parcelshop-popup-form';\n\t\tpopupCloseBtnSelector = '.js-dpd-parcelshop-popup-close-btn';\n\t\tpopupContainerSelector = '.js-dpd-parcelshop-popup-container';\n\t\tpopupInputCitySelector = '.js-dpd-parcelshop-popup-input-city';\n\t\tpopupInputZipSelector = '.js-dpd-parcelshop-popup-input-zip';\n\t\tpopupInputCountrySelector = '.js-dpd-parcelshop-popup-input-country';\n\t\tpopupParcelsListSelector = '.js-dpd-parcelshop-popup-parcels-list';\n\t\tpopupParcelsListItemSelector = '.js-dpd-parcelshop-popup-parcels-list li';\n\t\tpopupResponseSelector = '.js-dpd-parcelshop-popup-response';\n\t\tpopupSearchBtnSelector = '.js-dpd-parcelshop-popup-search-btn';\n\t\tpopupResultsSelector = '.js-dpd-parcelshop-popup-results';\n\t\tpopupOpenBtnSelector = '.js-dpd-parcelshop-open-popup-btn';\n\t\tpopupChooseParcelshopBtnSelector =\n\t\t\t'.js-dpd-parcelshop-popup-choose-parcelshop-btn';\n\t\tchosenParcelShopContentSelector = '.js-dpd-chosen-parcelshop-content';\n\t\tchosenParcelShopContentTextSelector =\n\t\t\t'.js-dpd-chosen-parcelshop-chosen-parcelshop-text';\n\t\tchosenParcelShopHiddenParcelIdSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-id';\n\t\tchosenParcelShopHiddenParcelPusIdSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-pus-id';\n\t\tchosenParcelShopHiddenParcelNameSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-name';\n\t\tchosenParcelShopHiddenParcelStreetSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-street';\n\t\tchosenParcelShopHiddenParcelCitySelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-city';\n\t\tchosenParcelShopHiddenParcelZipSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-zip';\n\t\tchosenParcelShopHiddenParcelCountryCodeSelector =\n\t\t\t'.js-dpd-parcelshop-hidden-parcelshop-country-code';\n\n\t\tpopup = document.querySelector(popupSelector);\n\t\tpopupForm = popup.querySelector(popupFormSelector);\n\t\tpopupInputCity = document.querySelector(popupInputCitySelector);\n\t\tpopupInputZip = document.querySelector(popupInputZipSelector);\n\t\tpopupInputCountry = document.querySelector(popupInputCountrySelector);\n\t\tpopupParcelsList = document.querySelector(popupParcelsListSelector);\n\t\tpopupResponse = document.querySelector(popupResponseSelector);\n\t\tpopupSearchBtn = document.querySelector(popupSearchBtnSelector);\n\t\tpopupResults = document.querySelector(popupResultsSelector);\n\n\t\tdocument.addEventListener(\n\t\t\t'submit',\n\t\t\tfunction (event) {\n\t\t\t\tif (!event.target.matches(popupFormSelector)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\ttriggerSearchParcelshops();\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\tfunction (event) {\n\t\t\t\tif (!event.target.matches(popupOpenBtnSelector)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\topenPopup();\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\tfunction (event) {\n\t\t\t\tif (\n\t\t\t\t\t!event.target.matches(popupCloseBtnSelector) &&\n\t\t\t\t\t!event.target.matches(popupContainerSelector)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tclosePopup();\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tdocument.addEventListener(\n\t\t\t'keydown',\n\t\t\tfunction (event) {\n\t\t\t\tif (event.key !== 'Escape') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclosePopup();\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\tfunction (event) {\n\t\t\t\tif (!event.target.matches(popupChooseParcelshopBtnSelector)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tchooseParcelShop();\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\tfunction (event) {\n\t\t\t\tif (!event.target.matches(popupParcelsListItemSelector)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tvar previousActiveItem = document.querySelector(\n\t\t\t\t\tpopupParcelsListItemSelector + '.active'\n\t\t\t\t);\n\n\t\t\t\tif (previousActiveItem) {\n\t\t\t\t\tpreviousActiveItem.classList.remove('active');\n\t\t\t\t}\n\n\t\t\t\tevent.target.classList.add('active');\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tfunction getSelectedParcel() {\n\t\treturn document.querySelector(popupParcelsListItemSelector + '.active');\n\t}\n\n\tfunction setSelectedParcelShop(selectedParcelShopEl = null) {\n\t\tif (!selectedParcelShopEl) {\n\t\t\tselectedParcelShopEl = getSelectedParcel();\n\t\t}\n\n\t\tif (!selectedParcelShopEl) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar parcelShopId = selectedParcelShopEl.getAttribute('data-id');\n\t\tvar parcelShopPusId = selectedParcelShopEl.getAttribute('data-pus-id');\n\t\tvar parcelShopName = selectedParcelShopEl.getAttribute('data-name');\n\t\tvar parcelShopStreet = selectedParcelShopEl.getAttribute('data-street');\n\t\tvar parcelShopZip = selectedParcelShopEl.getAttribute('data-zip');\n\t\tvar parcelShopCity = selectedParcelShopEl.getAttribute('data-city');\n\t\tvar parcelShopCountryCode =\n\t\t\tselectedParcelShopEl.getAttribute('data-country-code');\n\n\t\t// Update session\n\t\tsetSelectedParcelShopSession(\n\t\t\tparcelShopId,\n\t\t\tparcelShopPusId,\n\t\t\tparcelShopName,\n\t\t\tparcelShopStreet,\n\t\t\tparcelShopZip,\n\t\t\tparcelShopCity,\n\t\t\tparcelShopCountryCode\n\t\t);\n\n\t\t// Update frontend field\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelIdSelector).value =\n\t\t\tparcelShopId;\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelPusIdSelector).value =\n\t\t\tparcelShopPusId;\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelNameSelector).value =\n\t\t\tparcelShopName;\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelStreetSelector).value =\n\t\t\tparcelShopStreet;\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelZipSelector).value =\n\t\t\tparcelShopZip;\n\t\tdocument.querySelector(chosenParcelShopHiddenParcelCitySelector).value =\n\t\t\tparcelShopCity;\n\t\tdocument.querySelector(\n\t\t\tchosenParcelShopHiddenParcelCountryCodeSelector\n\t\t).value = parcelShopCountryCode;\n\n\t\tdocument.querySelector(chosenParcelShopContentTextSelector).innerHTML =\n\t\t\tselectedParcelShopEl.innerHTML;\n\t\tdocument\n\t\t\t.querySelector(chosenParcelShopContentSelector)\n\t\t\t.classList.add('active');\n\t}\n\n\tfunction setSelectedParcelShopSession(\n\t\tparcelShopId = '',\n\t\tparcelShopPusId = '',\n\t\tparcelShopName = '',\n\t\tparcelShopStreet = '',\n\t\tparcelShopZip = '',\n\t\tparcelShopCity = '',\n\t\tparcelShopCountryCode = ''\n\t) {\n\t\t// Prepare XHR Request.\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('POST', wc_dpd_parcelshop_popup_settings.ajax_url, true);\n\t\txhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n\t\t// Callback on response.\n\t\txhr.onreadystatechange = function () {\n\t\t\t// readyState 4 means the request is done.\n\t\t\tvar DONE = 4;\n\n\t\t\t// status 200 is a successful return.\n\t\t\tvar OK = 200;\n\n\t\t\t// Check response.\n\t\t\tif (xhr.readyState === DONE) {\n\t\t\t\tif (xhr.status === OK) {\n\t\t\t\t\tdocument.body.dispatchEvent(new Event('update_checkout'));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Finally do the call with the right parametetrs.\n\t\txhr.send(\n\t\t\t'action=wc_dpd_update_chosen_parcelshop&wp_nonce=' +\n\t\t\t\tpopupForm.getAttribute('data-nonce') +\n\t\t\t\t'&wc_dpd_parcelshop_id=' +\n\t\t\t\tparcelShopId +\n\t\t\t\t'&wc_dpd_parcelshop_pus_id=' +\n\t\t\t\tparcelShopPusId +\n\t\t\t\t'&wc_dpd_parcelshop_name=' +\n\t\t\t\tparcelShopName +\n\t\t\t\t'&wc_dpd_parcelshop_street=' +\n\t\t\t\tparcelShopStreet +\n\t\t\t\t'&wc_dpd_parcelshop_zip=' +\n\t\t\t\tparcelShopZip +\n\t\t\t\t'&wc_dpd_parcelshop_city=' +\n\t\t\t\tparcelShopCity +\n\t\t\t\t'&wc_dpd_parcelshop_country_code=' +\n\t\t\t\tparcelShopCountryCode\n\t\t);\n\t}\n\n\tfunction chooseParcelShop() {\n\t\tclearErrorMessages();\n\n\t\tvar selectedParcelShop = getSelectedParcel();\n\n\t\tif (!selectedParcelShop) {\n\t\t\tsetErrorMessage(\n\t\t\t\twc_dpd_parcelshop_popup_settings.select_parcelshop_error_message\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tsetSelectedParcelShop(selectedParcelShop);\n\n\t\tclosePopup();\n\t}\n\n\tfunction maybeMatchSelectedParcelshop() {\n\t\tif (getSelectedParcel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar selectedParcelId = document.querySelector(\n\t\t\tchosenParcelShopHiddenParcelIdSelector\n\t\t).value;\n\n\t\tif (!selectedParcelId) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar parcelShopEl = document.querySelector(\n\t\t\tpopupParcelsListItemSelector + '[data-id=\"' + selectedParcelId + '\"]'\n\t\t);\n\n\t\tif (!parcelShopEl) {\n\t\t\treturn;\n\t\t}\n\n\t\tparcelShopEl.classList.add('active');\n\t}\n\n\tfunction openPopup() {\n\t\tclearErrorMessages();\n\n\t\tmaybeMatchSelectedParcelshop();\n\n\t\tpopup.classList.add('active');\n\t}\n\n\tfunction closePopup() {\n\t\tpopup.classList.remove('active');\n\t}\n\n\tfunction showResults() {\n\t\tpopupResults.classList.add('active');\n\t}\n\n\tfunction hideResults() {\n\t\tpopupResults.classList.remove('active');\n\t}\n\n\tfunction clearPopupParcels() {\n\t\tpopupParcelsList.innerHTML = '';\n\t}\n\n\tfunction resetPopupParcels() {\n\t\thideResults();\n\t\tclearPopupParcels();\n\t}\n\n\tfunction setPopupParcelsList(html) {\n\t\tpopupParcelsList.innerHTML = html;\n\n\t\tshowResults();\n\t}\n\n\tfunction clearErrorMessages() {\n\t\tpopupResponse.innerHTML = '';\n\t\tpopupResponse.classList.remove('active');\n\t}\n\n\tfunction setErrorMessage(error) {\n\t\tpopupResponse.innerHTML = '<p>' + error + '</p>';\n\t\tpopupResponse.classList.add('active');\n\t}\n\n\tfunction searchParcelShop(city, zip, country) {\n\t\t// Prepare XHR Request.\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('POST', wc_dpd_parcelshop_popup_settings.ajax_url, true);\n\t\txhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n\t\tpopupSearchBtn.classList.add('loading');\n\n\t\tresetPopupParcels();\n\n\t\t// Callback on response.\n\t\txhr.onreadystatechange = function () {\n\t\t\t// readyState 4 means the request is done.\n\t\t\tvar DONE = 4;\n\n\t\t\t// status 200 is a successful return.\n\t\t\tvar OK = 200;\n\n\t\t\t// Check response.\n\t\t\tif (xhr.readyState === DONE) {\n\t\t\t\tpopupSearchBtn.classList.remove('loading');\n\t\t\t\tlet json = JSON.parse(xhr.responseText);\n\n\t\t\t\tif (xhr.status === OK) {\n\t\t\t\t\t// Exist if not success.\n\t\t\t\t\tif (!json.success) {\n\t\t\t\t\t\tsetErrorMessage(json.data.message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Success, display results\n\n\t\t\t\t\t\tif (json.data.hasOwnProperty('parcelshops')) {\n\t\t\t\t\t\t\tvar parcelshops = json.data.parcelshops;\n\t\t\t\t\t\t\tvar parcelshopsHtml = '';\n\n\t\t\t\t\t\t\tfor (var key in parcelshops) {\n\t\t\t\t\t\t\t\tvar id = parcelshops[key].hasOwnProperty('id')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].id\n\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\tvar pusId = parcelshops[key].hasOwnProperty('pusId')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].pusId\n\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\t// Skip parcelshops without ID\n\t\t\t\t\t\t\t\tif (!id || !pusId) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar name = parcelshops[key].hasOwnProperty('name')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].name\n\t\t\t\t\t\t\t\t\t: '';\n\t\t\t\t\t\t\t\tvar street = parcelshops[key].hasOwnProperty('street')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].street\n\t\t\t\t\t\t\t\t\t: '';\n\t\t\t\t\t\t\t\tvar zip = parcelshops[key].hasOwnProperty('zip')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].zip\n\t\t\t\t\t\t\t\t\t: '';\n\t\t\t\t\t\t\t\tvar city = parcelshops[key].hasOwnProperty('city')\n\t\t\t\t\t\t\t\t\t? parcelshops[key].city\n\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\tvar countryCode =\n\t\t\t\t\t\t\t\t\tparcelshops[key].hasOwnProperty('country') &&\n\t\t\t\t\t\t\t\t\tparcelshops[key].country.hasOwnProperty('code')\n\t\t\t\t\t\t\t\t\t\t? parcelshops[key].country.code\n\t\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\tvar countryName =\n\t\t\t\t\t\t\t\t\tparcelshops[key].hasOwnProperty('country') &&\n\t\t\t\t\t\t\t\t\tparcelshops[key].country.hasOwnProperty('name')\n\t\t\t\t\t\t\t\t\t\t? parcelshops[key].country.name\n\t\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\tparcelshopsHtml +=\n\t\t\t\t\t\t\t\t\t'<li' +\n\t\t\t\t\t\t\t\t\t' data-id=\"' +\n\t\t\t\t\t\t\t\t\tid +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-pus-id=\"' +\n\t\t\t\t\t\t\t\t\tpusId +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-name=\"' +\n\t\t\t\t\t\t\t\t\tname +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-street=\"' +\n\t\t\t\t\t\t\t\t\tstreet +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-zip=\"' +\n\t\t\t\t\t\t\t\t\tzip +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-city=\"' +\n\t\t\t\t\t\t\t\t\tcity +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t' data-country-code=\"' +\n\t\t\t\t\t\t\t\t\tcountryCode +\n\t\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\t\t'>' +\n\t\t\t\t\t\t\t\t\t[name, street, zip + ' ' + city, countryName].join(', ') +\n\t\t\t\t\t\t\t\t\t'</li>';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetPopupParcelsList(parcelshopsHtml);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Error.\n\t\t\t\t\tif (json.data.hasOwnProperty('message')) {\n\t\t\t\t\t\tsetErrorMessage(json.data.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Finally do the call with the right parametetrs.\n\t\txhr.send(\n\t\t\t'action=wc_dpd_parcelshop_search&wp_nonce=' +\n\t\t\t\tpopupForm.getAttribute('data-nonce') +\n\t\t\t\t'&city=' +\n\t\t\t\tcity +\n\t\t\t\t'&zip=' +\n\t\t\t\tzip +\n\t\t\t\t'&country=' +\n\t\t\t\tcountry\n\t\t);\n\t}\n\n\tfunction triggerSearchParcelshops() {\n\t\tclearErrorMessages();\n\n\t\tif (popupSearchBtn.classList.contains('loading')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t!popupInputCity.value ||\n\t\t\t!popupInputZip.value ||\n\t\t\t!popupInputCountry.value\n\t\t) {\n\t\t\tsetErrorMessage(\n\t\t\t\twc_dpd_parcelshop_popup_settings.required_fields_error_message\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tsearchParcelShop(\n\t\t\tpopupInputCity.value,\n\t\t\tpopupInputZip.value,\n\t\t\tpopupInputCountry.value\n\t\t);\n\t}\n\n\tfunction docReady(fn) {\n\t\tif (\n\t\t\tdocument.readyState === 'complete' ||\n\t\t\tdocument.readyState === 'interactive'\n\t\t) {\n\t\t\tsetTimeout(fn, 1);\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t}\n\t}\n\n\tdocReady(function () {\n\t\tinit();\n\t});\n\n\treturn {\n\t\topenPopup: openPopup,\n\t\tclosePopup: closePopup,\n\t\tsetSelectedParcelShop: setSelectedParcelShop,\n\t\tsearchParcelShop: searchParcelShop,\n\t\tresetPopupParcels: resetPopupParcels,\n\t\ttriggerSearchParcelshops: triggerSearchParcelshops,\n\t};\n})();\n"],"names":["window","dpdParcelShopPopup","popup","popupFormSelector","popupForm","popupInputCity","popupInputZip","popupInputCountry","popupParcelsList","popupResponse","popupSearchBtn","popupResults","chosenParcelShopContentSelector","chosenParcelShopContentTextSelector","chosenParcelShopHiddenParcelIdSelector","chosenParcelShopHiddenParcelPusIdSelector","chosenParcelShopHiddenParcelNameSelector","chosenParcelShopHiddenParcelStreetSelector","chosenParcelShopHiddenParcelCitySelector","chosenParcelShopHiddenParcelZipSelector","chosenParcelShopHiddenParcelCountryCodeSelector","fn","init","popupParcelsListItemSelector","document","querySelector","addEventListener","event","target","matches","preventDefault","triggerSearchParcelshops","openPopup","closePopup","key","clearErrorMessages","selectedParcelShop","getSelectedParcel","setSelectedParcelShop","setErrorMessage","wc_dpd_parcelshop_popup_settings","select_parcelshop_error_message","chooseParcelShop","previousActiveItem","classList","remove","add","selectedParcelShopEl","arguments","length","undefined","parcelShopId","getAttribute","parcelShopPusId","parcelShopName","parcelShopStreet","parcelShopZip","parcelShopCity","parcelShopCountryCode","xhr","XMLHttpRequest","open","ajax_url","setRequestHeader","onreadystatechange","DONE","OK","readyState","status","body","dispatchEvent","Event","send","setSelectedParcelShopSession","value","innerHTML","selectedParcelId","parcelShopEl","maybeMatchSelectedParcelshop","resetPopupParcels","setPopupParcelsList","html","error","searchParcelShop","city","zip","country","json","JSON","parse","responseText","success","data","hasOwnProperty","parcelshops","parcelshopsHtml","id","pusId","name","street","code","join","message","contains","required_fields_error_message","setTimeout"],"sourceRoot":""}